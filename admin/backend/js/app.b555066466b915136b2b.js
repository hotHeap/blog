webpackJsonp([16],{Lcfh:function(e,t){},NHnr:function(e,t,n){"use strict";function a(e,t,n){return new u.a(function(a,r){x({method:e,url:t,params:n,data:C.stringify(n)}).then(function(e){200===e.status?a(e.data):r("request error in "+t)}).catch(function(e){console.log(e,t)})})}function r(e){n("Lcfh")}Object.defineProperty(t,"__esModule",{value:!0});var i=(n("j1ja"),n("7+uW")),o=n("NYxO"),c=n("//Fk"),u=n.n(c),m=n("/ocq"),s=function(e){return n.e(13).then(function(){var t=[n("g7E2")];e.apply(null,t)}.bind(this)).catch(n.oe)},l=function(e){return Promise.all([n.e(0),n.e(12)]).then(function(){var t=[n("EV1k")];e.apply(null,t)}.bind(this)).catch(n.oe)},p=function(e){return Promise.all([n.e(0),n.e(5)]).then(function(){var t=[n("suIm")];e.apply(null,t)}.bind(this)).catch(n.oe)},d=function(e){return Promise.all([n.e(0),n.e(10)]).then(function(){var t=[n("g696")];e.apply(null,t)}.bind(this)).catch(n.oe)},h=function(e){return Promise.all([n.e(0),n.e(6)]).then(function(){var t=[n("O0s6")];e.apply(null,t)}.bind(this)).catch(n.oe)},f=function(e){return Promise.all([n.e(0),n.e(7)]).then(function(){var t=[n("mdjC")];e.apply(null,t)}.bind(this)).catch(n.oe)},g=function(e){return Promise.all([n.e(0),n.e(4)]).then(function(){var t=[n("/9mm")];e.apply(null,t)}.bind(this)).catch(n.oe)},v=function(e){return Promise.all([n.e(0),n.e(1)]).then(function(){var t=[n("4sYH")];e.apply(null,t)}.bind(this)).catch(n.oe)},A=function(e){return Promise.all([n.e(0),n.e(2)]).then(function(){var t=[n("Adb/")];e.apply(null,t)}.bind(this)).catch(n.oe)},w=function(e){return Promise.all([n.e(0),n.e(3)]).then(function(){var t=[n("eaCl")];e.apply(null,t)}.bind(this)).catch(n.oe)},b=function(e){return Promise.all([n.e(0),n.e(8)]).then(function(){var t=[n("pGnI")];e.apply(null,t)}.bind(this)).catch(n.oe)},y=function(e){return Promise.all([n.e(0),n.e(9)]).then(function(){var t=[n("QXNJ")];e.apply(null,t)}.bind(this)).catch(n.oe)},k=function(e){return Promise.all([n.e(0),n.e(11)]).then(function(){var t=[n("YOyO")];e.apply(null,t)}.bind(this)).catch(n.oe)};i.a.use(m.a);var N=new m.a({mode:"history",routes:[{path:"*",name:"miss",component:s},{path:"/",redirect:"/admin"},{path:"/login",name:"login",component:l},{path:"/admin",name:"admin",component:p,redirect:"/admin/allArticles",meta:{requireAuth:!0,keepAlive:!0},children:[{path:"allArticles",name:"allArticles",component:d,meta:{requireAuth:!0,keepAlive:!0}},{path:"allArticles/:tag",name:"eachTag",component:h,meta:{requireAuth:!0,keepAlive:!0}},{path:"review/:eTag/:articleId",name:"review",component:g,meta:{requireAuth:!0,keepAlive:!0}},{path:"draft",name:"draft",component:f,meta:{requireAuth:!0,keepAlive:!0}},{path:"msgBoard",name:"adminMsgBoard",component:A,meta:{requireAuth:!0,keepAlive:!0}},{path:"comments",name:"comments",component:w,meta:{requireAuth:!0,keepAlive:!0}},{path:"newMsg",name:"newMsg",component:b,meta:{requireAuth:!0,keepAlive:!0}},{path:"adminSet",name:"adminSet",component:y,meta:{requireAuth:!0,keepAlive:!0}},{path:"/admin/search/:base",name:"search",component:k,meta:{requireAuth:!0,keepAlive:!0}}]},{path:"/admin/publish",name:"publish",component:v,meta:{requireAuth:!0}},{path:"/admin/draftrevise",name:"draftrevise",component:v,meta:{requireAuth:!0}},{path:"/admin/update",name:"update",component:v,meta:{requireAuth:!0}}]});N.beforeEach(function(e,t,n){e.meta.requireAuth&&!localStorage.getItem("validate-info-tk")?(_.commit("toPath",e.fullPath),n({name:"login"})):(e.meta.requireAuth&&localStorage.getItem("validate-info-tk"),n())});var I=N,x=n("mtWM"),C=n("mw3O");x.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",x.interceptors.request.use(function(e){var t=localStorage.getItem("validate-info-tk");return t&&(e.headers.Authorization=t),e},function(e){return u.a.reject(e)}),x.interceptors.response.use(function(e){return e.data.code&&401===e.data.code&&I.push({name:"login"}),e},function(e){return u.a.reject(e)});var P={get:function(e,t){return new u.a(function(n,r){a("get",e,t).then(function(e){n(e)})})},post:function(e,t){return new u.a(function(n,r){a("post",e,t).then(function(e){n(e)})})},put:function(e,t){return new u.a(function(n,r){a("put",e,t).then(function(e){n(e)})})},patch:function(e,t){return new u.a(function(n,r){a("patch",e,t).then(function(e){n(e)})})},delete:function(e,t){return new u.a(function(n,r){a("delete",e,t).then(function(e){n(e)})})}},q=P,S=(n("mtWM"),{getArticles:function(e,t){var n=(e.commit,e.state),a={};return a=t.tag?t:{publish:t.publish,page:t.page},q.get("/api/getAdminArticles",a).then(function(e){return e.length&&(t.tag?n.articles.tags=e:!0===t.publish?n.articles.all=e:n.articles.drafts=e),e})},getTagsclass:function(e,t){var n=(e.commit,e.state);return q.get("/api/adminTags",{publish:t.publish}).then(function(e){return e.tags&&e.tags.length&&(e.tags.forEach(function(e,t,n){"life"===e.tag&&(e.tag="生活")}),n.tagsObj=e),e})},getArticlesCount:function(e,t){var n=e.commit;e.state;return q.get("/api/getCount",t).then(function(e){n("pageArray",e)})},getArticle:function(e,t){var n=(e.commit,e.state);return q.get("/api/getAdminArticle",t).then(function(e){if(e.length){n.articles.only=e;var t=e[0].tag[0];e[0].publish?n.forLocation=[{pathName:"allArticles",showName:"已发表文章"},{pathName:"eachTag",showName:t,params:{tag:t}},{pathName:"review",showName:e[0].title,params:{eTag:t,articleId:e[0].articleId}}]:n.forLocation=[{pathName:"draft",showName:"草稿"},{pathName:"review",showName:e[0].title,params:{eTag:t,articleId:e[0].articleId}}]}return e})},getMsgBoard:function(e,t){var n=(e.commit,e.state);return q.get("/api/getAdminBoard",t).then(function(e){return e.length&&(n.msgBoard=e),e})},getNews:function(e,t){var n=e.commit;e.state;return q.get("/api/getNews").then(function(e){return e.newsArr&&e.newsArr.length&&n("handleNews",e),e})},getMsgCount:function(e,t){var n=e.commit;return q.get("/api/getMsgCount").then(function(e){n("pageArray",e)})},addBoardReply:function(e,t){e.commit;return q.patch("/api/addReply",t)},removeLeavewords:function(e,t){e.commit;return q.delete("/api/removeLeavewords",t)},reduceLeavewords:function(e,t){e.commit;return q.patch("/api/reduceLeavewords",t)},search:function(e,t){var n=(e.commmit,e.state);return q.get("/api/adminSearch",t).then(function(e){return e.length?n.articles.search=e:n.articles.search=[],e})},getAdminComments:function(e,t){var n=(e.commit,e.state);return q.get("/api/getAdminComments",t).then(function(e){return e.length&&(n.comments=e),e})},getCommentsCount:function(e){var t=e.commit;e.state;return q.get("/api/getCommentsCount").then(function(e){t("pageArray",e)})},addCommentsReply:function(e,t){e.commit;return q.patch("/api/addComment",t)},removeComments:function(e,t){e.commit;return q.delete("/api/removeComments",t)},reduceComments:function(e,t){e.commit;return q.patch("/api/reduceComments",t)},login:function(e,t){e.commit,e.state;return q.post("/api/login",t)},saveArticle:function(e,t){e.commit;return q.post("/api/saveArticle",t)},updateArticle:function(e,t){e.commit;return q.patch("/api/updata",t)},removeArticle:function(e,t){e.commit;return q.delete("/api/deleteArticle",t)},removeNews:function(e,t){e.commit,e.state;return q.delete("/api/deleteNews",t)},reviseKey:function(e,t){e.commit;return q.patch("/api/reviseKey",t)},copyData:function(){return q.get("/api/copyData")},downloadDb:function(){return q.get("/api/downloadSingle")},confirmToken:function(){return q.get("/api/confirmToken")}}),B={pageArray:function(e,t){for(var n=Math.ceil(t/10),a=[],r=1;r<n+1;r++)a.push(r);e.pageArray=a},reduceArr:function(e,t){"allArticles"===t.name&&e.articles.all.splice(t.index,1),"eachTag"===t.name&&e.articles.tags.splice(t.index,1),"draft"===t.name&&e.articles.drafts.splice(t.index,1),"adminMsgBoard"===t.name&&(-1!==t.oneIndex&&-1===t.twoIndex?e.msgBoard.splice(t.oneIndex,1):e.msgBoard[t.oneIndex].reply.splice(t.twoIndex,1)),"comments"===t.name&&(-1!==t.oneIndex&&-1===t.twoIndex?e.comments.splice(t.oneIndex,1):e.comments[t.oneIndex].reply.splice(t.twoIndex,1))},reduceArr_all:function(e,t){"allArticles"===t.name&&(e.articles.all=e.articles.all.filter(function(e,n,a){return t.removeArr.indexOf(e.articleId)<0})),"eachTag"===t.name&&(e.articles.tags=e.articles.tags.filter(function(e,n,a){return t.removeArr.indexOf(e.articleId)<0})),"draft"===t.name&&(e.articles.drafts=e.articles.drafts.filter(function(e,n,a){return t.removeArr.indexOf(e.articleId)<0})),"adminMsgBoard"===t.name&&(e.msgBoard=e.msgBoard.filter(function(e,n,a){return t.removeArr.indexOf(e._id)<0})),"comments"===t.name&&(e.comments=e.comments.filter(function(e,n,a){return t.removeArr.indexOf(e._id)<0}))},addLocalWord:function(e,t){e.msgBoard.forEach(function(n,a,r){if(n._id===t._id)return void e.msgBoard.splice(a,1,t)})},addLocalComment:function(e,t){e.comments.forEach(function(n,a,r){if(n._id===t._id)return void e.comments.splice(a,1,t)})},handleNews:function(e,t){e.news={pvNum:0,comment:[],msgboard:[],like:[],pv:[]},e.news.pvNum=t.pvNum,t.newsArr.forEach(function(t,n,a){switch(t.type){case"comment":e.news.comment.push(t),e.redSup.c=!0;break;case"msgboard":e.news.msgboard.push(t),e.redSup.m=!0;break;case"like":e.news.like.push(t),e.redSup.l=!0;break;case"pv":e.news.pv.push(t),e.redSup.p=!0}})},changeRedSup:function(e,t){switch(t){case"comment":e.redSup.c=!1;break;case"msgboard":e.redSup.m=!1;break;case"like":e.redSup.l=!1;break;case"pv":e.redSup.p=!1}},changeCurrentPage:function(e,t){e.page=t},productView:function(e,t){e.viewArticle=t},clearOnly:function(e){e.articles.only=[],e.forLocation=[]},toPath:function(e,t){e.toPath=t},get_user:function(e,t){e.responser=t}};i.a.use(o.a);var T=new o.a.Store({state:{articles:{all:[],drafts:[],tags:[],search:[],only:[]},tagsObj:{},pageArray:[],msgBoard:[],comments:[],news:{pvNum:0,comment:[],msgboard:[],like:[],pv:[]},toPath:"/admin",responser:"",viewArticle:{},forLocation:[],page:1,redSup:{c:!1,m:!1,l:!1,p:!1}},mutations:B,actions:S}),_=T,M={name:"app"},O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e.$route.meta.keepAlive?n("keep-alive",[n("router-view")],1):e._e(),e._v(" "),e.$route.meta.keepAlive?e._e():n("router-view")],1)},L=[],j={render:O,staticRenderFns:L},E=j,D=n("VU/8"),R=r,F=D(M,E,!1,R,null,null),H=F.exports;i.a.filter("reviseTime",function(e){for(var t=new Date(e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),i=t.getHours(),o=t.getMinutes(),c=0;c<10;c++)c===o&&(o="0"+o);return n+"-"+a+"-"+r+" "+i+":"+o}),i.a.config.productionTip=!1,new i.a({el:"#app",router:I,store:_,template:"<App/>",components:{App:H}})}},["NHnr"]);